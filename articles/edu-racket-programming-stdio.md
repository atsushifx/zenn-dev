---
title: "Racket: Racket ã«ãŠã‘ã‚‹å…¥å‡ºåŠ›"
emoji: "ğŸ¾"
type: "idea"
topics: ["Racket", "é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "æ¨™æº–å…¥å‡ºåŠ›", ]
published: false
---

## ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã§ã¯ã€`racket`ã«ãŠã‘ã‚‹å…¥å‡ºåŠ›ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚
`Racket`ã¯ã€å…¥åŠ›ã«`read`é–¢æ•°ã€å‡ºåŠ›ã«`write`/`print`/`display`ã®é–¢æ•°ãŒä½¿ãˆã¾ã™ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€å„é–¢æ•°ã«ã¤ã„ã¦åŸºæœ¬çš„ãªã“ã¨ã‚’ã“ã¨ã‚’èª¬æ˜ã—ã€ãã®ã»ã‹ã®é–¢æ•°ã«ã¤ã„ã¦ã¯èª¬æ˜ã—ã¾ã›ã‚“ã€‚
è©³ã—ãã¯ã€[`Racket Reference`](https://docs.racket-lang.org/reference/input-and-output.html) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## æ¨™æº–å…¥å‡ºåŠ›

`Racket`ã®å…¥å‡ºåŠ›é–¢æ•°ã¯ã€æ¨™æº–å…¥å‡ºåŠ›ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
'read`é–¢æ•°ã¯ã€ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã›ãšã«å‘¼ã³ã ã™ã¨ã€æ¨™æº–å…¥åŠ›ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
`write`/`print`/`display`ã®å„é–¢æ•°ã¯ã€ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã›ãšã«å‘¼ã³ã ã™ã¨ã€æ¨™æº–å‡ºåŠ›äºŒãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

ã“ã®ãŸã‚ã€é€šå¸¸ã®å…¥å‡ºåŠ›é–¢æ•°ã‚’ä½¿ã£ãŸ`racket`ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã®å…¥åŠ›ã‚„ãƒ‘ã‚¤ãƒ—ãƒ»ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

## å…¥åŠ›é–¢æ•°

### `read`ã®è©³ç´°

`read`é–¢æ•°ã¯ã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜è¿°ã«åˆã‚ã›ã¦å‹•çš„ã«å‹ä»˜ã‘ã—ã¾ã™ã€‚
ãŸã¨ãˆã°ã€ä¸‹è¨˜ã®ã‚ˆã†ã«å…¥åŠ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã¨ãƒ‡ãƒ¼ã‚¿ã®å‹ã‚’è¿”ã™ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚ã‚Šã¾ã™:

@[gist](https://gist.github.com/atsushifx/c6c137b8cd8c59213ac31722ded5ee14?file=echo-loop.rkt)

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```racket
> racket .\echo-loop.rkt

--- echo ---
input: abc
output: 'abc  -  symbol
input: 42
output: 42  -  number
input: "hello"
output: "hello"  -  string
input: #\k
output: #\k  -  character
input: [1 . 2]
output: '(1 . 2)  -  pair
input: '(1 2 3)
output: ''(1 2 3)  -  list
input: ^Z
output: #<eof>  -  unknown

```

ä¸Šè¨˜ã®ã‚ˆã†ã«ã€è¨˜è¿°ã—ãŸãƒ‡ãƒ¼ã‚¿ã«åˆã‚ã›ã¦é©åˆ‡ãªãƒ‡ãƒ¼ã‚¿å‹ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚

### ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®å…¥åŠ›

ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿ã ã™ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã®ä¾‹ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```racket: fileinput.rkt
(define fin (open-input-file "hello.txt"))
(define in (read fin))
(close-input-port fin)

```

### æ–‡å­—ã®å…¥åŠ›

`read`é–¢æ•°ã«ã¯ã€æ–‡å­—ã®å…¥åŠ›ç”¨ã®`read-char`é–¢æ•°ã‚„è¡Œå…¥åŠ›ç”¨ã®`read-line`é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚
`read-char`é–¢æ•°ã¯ã€æ¨™æº–å…¥åŠ›ã‹ã‚‰ 1æ–‡å­—ãšã¤èª­ã¿è¾¼ã¿ã€`read-line`é–¢æ•°ã¯é–‹æ¥­ã¾ã§ã®è¡Œã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

ã“ã®ã¨ãã€æ–‡å­—ã¯ `UTF-8`ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦èª­ã¿è¾¼ã¿ã¾ã™ã€‚

è©³ã—ã„ã“ã¨ã¯ã€ [`Racket Reference`](https://docs.racket-lang.org/reference/Byte_and_String_Input.html)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## å‡ºåŠ›é–¢æ•°

### `write`/`print`/`display`ã®é•ã„

`write`/`print`/`display`ã®å„é–¢æ•°ã¯å½¹å‰²ãŒé•ã„ã¾ã™ã€‚
ãã‚Œãã‚Œã®å½¹å‰²ã¯ã€æ¬¡ã®é€šã‚Šã§ã™:

- `write`:
  `read`ã§èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’ã€ãã®ã¾ã¾ã®å½¢å¼ã§å‡ºåŠ›ã™ã‚‹ã€‚
- `print`:
  `REPL`ã§ã®å‡ºåŠ›ã®ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã™ã‚‹ã€‚æ–‡å­—åˆ—ã€ã‚·ãƒ³ãƒœãƒ«ãªã©ã¯ã‚¯ã‚ªãƒ¼ãƒˆã•ã‚Œã‚‹ã€‚
- `display`:
  ç”»é¢å‡ºåŠ›ç”¨ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã™ã‚‹ã€‚æ–‡å­—åˆ—å‹ã€ã‚·ãƒ³ãƒœãƒ«å‹ã€æ–‡å­—å‹ãªã©ã¯ã‚¯ã‚ªãƒ¼ãƒˆã—ãªã„ã€‚

å‡ºåŠ›ä¾‹ã¯ã€ä¸‹è¨˜ã‚’å‚ç…§ã—ã¦ãã ã•ã„:

| | `write` | `print`| `display` |
| --- | --- | --- | --- |
| 1/2 (æ•°å€¤å‹) | 1/2 | 1/2 | 1/2 |
| #\x (æ–‡å­—å‹) | #\x | #\x | x |
| "hello" (æ–‡å­—åˆ—å‹) | "hello" | "hello" | hello |
| '\|tea pot\| (ã‚·ãƒ³ãƒœãƒ«å‹) | '\|tea pot\| | '\|tea pot\| | tea pot |
| '("I" pod) (ãƒªã‚¹ãƒˆå‹) | '("I" pod) | '("I" pod) | I pod |
| write (procedure) | #\<procedure:write> | #\<procedure:write> | #\<procedure:write> |

### ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å‡ºåŠ›

ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã«ã¯ã€`open-output-file`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ã™ã§ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã™ã€‚
ã“ã®ã¨ãã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³`#:exists 'truncate`ã‚’è¨­å®šã™ã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ãƒ‡ãƒ¼ã‚¿ã§ä¸Šæ›¸ãã—ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³`#:exists 'update`ã‚’æŒ‡å®šã™ã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¾ã™ã€‚

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```racket: fileout.rkt
(define fout (open-output-file "data.txt"))    ; cause exception if file is already exist
(display "howdy" fout)
(close-output-port fout)

```

ãƒ•ã‚¡ã‚¤ãƒ«ãŒã™ã§ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™:

```racket
> racket fileout.rkt

open-output-file: file exists
  path: data.txt
  context...:
   body of
   "fileout.rkt"

```

ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼ã‚’é˜²ããŸã‚ã«ã€`#:exists 'truncate`ã‚’æŒ‡å®šã—ã¾ã™:

```racket: fileout.rkt
(define fout (open-output-file "data.txt"))
(display "howdy" fout)
(close-output-port fout)

```

### æ–‡å­—ã®å‡ºåŠ›

`read-char`ã«å¯¾å¿œã™ã‚‹å½¢ã§ã€1æ–‡å­—å‡ºåŠ›ç”¨ã«`write-char`é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚
`write-char`é–¢æ•°ã¯`read-char`ã§èª­ã¿è¾¼ã‚“ã  1æ–‡å­—ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

`read-line`é–¢æ•°ã¯ã€é€šå¸¸ã®`write`é–¢æ•°ã‚’ä½¿ã£ã¦å‡ºåŠ›ã—ã¾ã™ã€‚

## ãŠã‚ã‚Šã«

## å‚è€ƒè³‡æ–™

### Webã‚µã‚¤ãƒˆ

- [`Racket Guide`](https://docs.racket-lang.org/guide/i_o.html):
  `Racket Guide`ã®å…¥å‡ºåŠ›ã®ç« 

- [`Racket Reference`](https://docs.racket-lang.org/reference/input-and-output.html):
  `Racket Reference`ã®å…¥å‡ºåŠ›ã®ç« 
