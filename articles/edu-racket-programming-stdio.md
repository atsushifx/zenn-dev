---
title: "Racket: Racket ã«ãŠã‘ã‚‹å…¥å‡ºåŠ›"
emoji: "ğŸ¾"
type: "idea"
topics: ["Racket", "é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "æ¨™æº–å…¥å‡ºåŠ›", ]
published: false
---

## ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã§ã¯ã€é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚ã‚‹`Racket`ã®åŸºæœ¬çš„ãªå…¥å‡ºåŠ›é–¢æ•°ã«ã¤ã„ã¦ã€å…·ä½“çš„ãªã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ç”¨ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€`Racket`ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å…¥å‡ºåŠ›ã‚’å®Ÿè£…ã—ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œç”¨ã§ãã¾ã™ã€‚

ã“ã“ã§ã¯ã€`Racket`ã®ä¸»è¦ãªå…¥å‡ºåŠ›é–¢æ•°ã‚’ç´¹ä»‹ã—ã€ãã‚Œãã‚Œã®æ©Ÿèƒ½ã¨ä½¿ç”¨ä¾‹ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚
è©³ç´°ã¯ [`Racket Reference`](https://docs.racket-lang.org/reference/input-and-output.html) ã‚’å‚ç…§ã—ã¦ã€ãã®ä»–ã®é–¢æ•°ã‚„ä½¿ç”¨ä¾‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

## 1. ãƒãƒ¼ãƒˆã¨æ¨™æº–å…¥å‡ºåŠ›

`Racket`ã®å…¥å‡ºåŠ›é–¢æ•°ã¯ã€ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚
ãƒãƒ¼ãƒˆã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ã®å…¥å‡ºåŠ›ã‚’çµ±ä¸€ã—ã¦ç®¡ç†ã™ã‚‹`Racket`ã®é‡è¦ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
`Racket`ã®å…¥å‡ºåŠ›é–¢æ•°ã¯ã€ãƒãƒ¼ãƒˆè¶Šã—ã«ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã€å‡ºåŠ›ã—ã¾ã™ã€‚
ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã—ãªã„ã¨ãã¯ã€æ¨™æº–å…¥åŠ›/æ¨™æº–å‡ºåŠ›ãƒãƒ¼ãƒˆãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

`read`é–¢æ•°ã¯ã€ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã—ãªã„å ´åˆã€æ¨™æº–å…¥åŠ›ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
`write`, `print`, `display`ã®å„é–¢æ•°ã¯ã€ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã—ãªã„å ´åˆã€æ¨™æº–å‡ºåŠ›ã«ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

é€šå¸¸ã®å…¥å‡ºåŠ›é–¢æ•°ã‚’ä½¿ã£ãŸ (ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã—ãªã„) `Racket`ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã®å…¥åŠ›ã‚„ãƒ‘ã‚¤ãƒ—ãƒ»ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å…¥å‡ºåŠ›ã‚’æŸ”è»Ÿã«æ“ä½œã§ãã¾ã™ã€‚

## 2. å…¥åŠ›é–¢æ•°

### `2.1 read`é–¢æ•°ã®è©³ç´°

`read`é–¢æ•°ã¯ã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’`Racket`ã®ãƒ‡ãƒ¼ã‚¿å‹ã¨ã—ã¦è§£é‡ˆã—ã¦è¿”ã—ã¾ã™ã€‚
å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãŒ`Racket`ã®ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ­£ã—ããªã„å ´åˆã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚
ãŸã¨ãˆã°ã€ãƒªã‚¹ãƒˆã®`(`ãŒ`)`ã§ã¯ãªã`]`ã§é–‰ã˜ã‚‰ã‚Œã¦ã„ã‚‹å ´åˆã«ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

ä¸‹è¨˜ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’èª­ã¿å–ã‚Šã€ãã®å…¥åŠ›ã¨ãƒ‡ãƒ¼ã‚¿å‹ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚
`EOF (End of File)` (`Windows`ã§ã¯ã€`Ctrl+Z`ã‚­ãƒ¼)ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€çµ‚äº†ã—ã¾ã™ã€‚

@[gist](https://gist.github.com/atsushifx/c6c137b8cd8c59213ac31722ded5ee14?file=echo-loop.rkt)

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```racket
> racket .\echo-loop.rkt

--- echo ---
input: abc
output: 'abc  -  symbol
input: 42
output: 42  -  number
input: "hello"
output: "hello"  -  string
input: #\k
output: #\k  -  character
input: [1 . 2]
output: '(1 . 2)  -  pair
input: '(1 2 3)
output: ''(1 2 3)  -  list
input: ^Z
output: #<eof>  -  unknown

```

### 2.2 ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®å…¥åŠ›

ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã®ä¾‹ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```racket: fileinput.rkt
(define fin (open-input-file "data.txt"))
(define data (read fin))
(printf "read data: ~a\n" data)
(close-input-port fin)

```

### 2.3 æ–‡å­—ã®å…¥åŠ›

`read`é–¢æ•°ã«ã¯ã€æ–‡å­—å…¥åŠ›ç”¨ã®`read-char`é–¢æ•°ã‚„è¡Œå…¥åŠ›ç”¨ã®`read-line`é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚
`read-char`é–¢æ•°ã¯ã€æ¨™æº–å…¥åŠ›ã‹ã‚‰ 1æ–‡å­—ãšã¤èª­ã¿è¾¼ã¿ã€`read-line`é–¢æ•°ã¯æ”¹è¡Œã¾ã§ã® 1è¡Œã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

ã“ã®ã¨ãã€æ–‡å­—ã¯`UTF-8`ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã§èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚

è©³ç´°ã¯ã€ [`Racket Reference`](https://docs.racket-lang.org/reference/Byte_and_String_Input.html)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## 3. å‡ºåŠ›é–¢æ•°

### 3.1 `write`/`print`/`display`ã®é•ã„

`write`,`print`,`display`ã®å„é–¢æ•°ã¯å½¹å‰²ãŒé•ã„ã¾ã™ã€‚
ãã‚Œãã‚Œã®å½¹å‰²ã¯ã€æ¬¡ã®é€šã‚Šã§ã™:

- `write`:
  `read`ã§èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’ã€ãã®ã¾ã¾ã®å½¢å¼ã§å‡ºåŠ›ã™ã‚‹ã€‚
- `print`:
  `REPL`ã§ã®å‡ºåŠ›ã®ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã™ã‚‹ã€‚æ–‡å­—åˆ—ã€ã‚·ãƒ³ãƒœãƒ«ãªã©ã¯ã‚¯ã‚ªãƒ¼ãƒˆã•ã‚Œã‚‹ã€‚
- `display`:
  ç”»é¢å‡ºåŠ›ç”¨ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã™ã‚‹ã€‚æ–‡å­—åˆ—å‹ã€ã‚·ãƒ³ãƒœãƒ«å‹ã€æ–‡å­—å‹ãªã©ã¯ã‚¯ã‚ªãƒ¼ãƒˆã—ãªã„ã€‚

å‡ºåŠ›ä¾‹ã¯ã€ä¸‹è¨˜ã‚’å‚ç…§ã—ã¦ãã ã•ã„:

| | `write` | `print`| `display` |
| --- | --- | --- | --- |
| 1/2 (æ•°å€¤å‹) | 1/2 | 1/2 | 1/2 |
| #\x (æ–‡å­—å‹) | #\x | #\x | x |
| "hello" (æ–‡å­—åˆ—å‹) | "hello" | "hello" | hello |
| '\|tea pot\| (ã‚·ãƒ³ãƒœãƒ«å‹) | '\|tea pot\| | '\|tea pot\| | tea pot |
| '("I" pod) (ãƒªã‚¹ãƒˆå‹) | '("I" pod) | '("I" pod) | I pod |
| write (procedure) | #\<procedure:write> | #\<procedure:write> | #\<procedure:write> |

### 3.2 ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å‡ºåŠ›

ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã«ã¯ã€`open-output-file`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ãƒ•ã‚¡ã‚¤ãƒ«ãŒã™ã§ã«å­˜åœ¨ã™ã‚‹å ´åˆã€`open-output-file`é–¢æ•°ã¯ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã¾ã™ãŒã€`#:exists 'truncate`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§å›é¿ã§ãã¾ã™ã€‚
ã“ã®ã¨ãã€`Racket`ã¯ã€æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ã™ã¹ã¦æ¶ˆå»ã—ã€æ–°ã—ã„å†…å®¹ã§ä¸Šæ›¸ãã—ã¾ã™ã€‚
`'truncate`ã®ä»£ã‚ã‚Šã«ã€`#:exist 'can-update`ãŒæŒ‡å®šã§ãã¾ã™ã€‚
ã“ã®å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯æ¶ˆå»ã›ãšã€æ–°ã—ã„å†…å®¹ã§ä¸Šæ›¸ãã—ã¾ã™ã€‚

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```racket: fileout.rkt
(define fout (open-output-file "data.txt"))    ; cause exception if file is already exist
(display "howdy" fout)
(close-output-port fout)

```

ãƒ•ã‚¡ã‚¤ãƒ«ãŒã™ã§ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ãŒã€`#:exist 'truncate`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å›é¿ã§ãã¾ã™:

```racket
> racket fileout.rkt

open-output-file: file exists
  path: data.txt
  context...:
   body of
   "fileout.rkt"

```

ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ãŸã‚ã«ã€`#:exists 'truncate`ã‚’æŒ‡å®šã—ã¾ã™:

```racket: fileout.rkt
(define fout (open-output-file "data.txt" #:exist 'truncate))
(display "howdy" fout)
(close-output-port fout)

```

### 3.3 æ–‡å­—ã®å‡ºåŠ›

`read-char`ã«å¯¾å¿œã™ã‚‹å½¢ã§ã€1æ–‡å­—å‡ºåŠ›ç”¨ã«`write-char`é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚
`write-char`é–¢æ•°ã¯`read-char`ã§èª­ã¿è¾¼ã‚“ã  1æ–‡å­—ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

`read-line`é–¢æ•°ã¯ã€é€šå¸¸ã®`write`é–¢æ•°ã‚’ä½¿ã£ã¦å‡ºåŠ›ã—ã¾ã™ã€‚

## ãŠã‚ã‚Šã«

ã“ã®è¨˜äº‹ã§ã¯ã€`Racket`ã®å…¥å‡ºåŠ›é–¢æ•°ã«ã¤ã„ã¦åŸºæœ¬çš„ãªã“ã¨ã‚’èª¬æ˜ã—ã¾ã—ãŸã€‚
ã“ã‚Œã‚‰ã®é–¢æ•°ã‚’é§†ä½¿ã™ã‚‹ã“ã¨ã§ã€å¤–éƒ¨ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãªã©ã«å¯¾å¿œã—ãŸå®Ÿè·µçš„ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã§ãã¾ã™ã€‚

`Racket`ã®å­¦ç¿’ã‚’æ·±ã‚ã€é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®æŠ€èƒ½ã‚’å‘ä¸Šã•ã›ã€ã‚ˆã‚Šæ´—ç·´ã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ã‚‡ã†ã€‚

ãã‚Œã§ã¯ã€Happy Hacking!

## æŠ€è¡“ç”¨èªã¨æ³¨é‡ˆ

æŠ€è¡“ç”¨èªã«ã¤ã„ã¦ã€ãã®æ³¨é‡ˆã‚’ç®‡æ¡æ›¸ãã«ã—ã¾ã™ã€‚

- `read`é–¢æ•°:
  å…¥åŠ›ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ã€`Racket`ã®ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦è§£é‡ˆã—ã€å‹ä»˜ã‘ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦è¿”ã™é–¢æ•°ã€‚

- `write`é–¢æ•°:
  `Racket`ã®ãƒ‡ãƒ¼ã‚¿å‹ã‚’å…ƒã®å½¢å¼ã§å‡ºåŠ›ã™ã‚‹é–¢æ•°ã€‚

- `print`é–¢æ•°:
  `Racket`ã®ãƒ‡ãƒ¼ã‚¿ã‚’`REPL`ã§ä½¿ç”¨ã•ã‚Œã‚‹å½¢å¼ã§å‡ºåŠ›ã™ã‚‹é–¢æ•°ã€‚

- `display`é–¢æ•°:
  ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ã‚ªãƒ¼ãƒˆã—ãªã„ã‚·ãƒ³ãƒ—ãƒ«ãªå½¢å¼ã§å‡ºåŠ›ã™ã‚‹é–¢æ•°ã€‚

- `ãƒãƒ¼ãƒˆ`:
  ãƒ‡ãƒ¼ã‚¿ã‚’é–¢æ•°ã‚’é€šã˜ã¦å…¥å‡ºåŠ›ã™ã‚‹ãŸã‚ã®ã€`Racket`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚

- `ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ãƒˆ`:
  ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å…¥å‡ºåŠ›ã‚’è¡Œãªã†ãŸã‚ã®ãƒãƒ¼ãƒˆã€‚

## å‚è€ƒè³‡æ–™

### Webã‚µã‚¤ãƒˆ

- [`Racket Guide`](https://docs.racket-lang.org/guide/i_o.html):
  `Racket Guide`ã®å…¥å‡ºåŠ›ã®ç« 

- [`Racket Reference`](https://docs.racket-lang.org/reference/input-and-output.html):
  `Racket Reference`ã®å…¥å‡ºåŠ›ã®ç« 
