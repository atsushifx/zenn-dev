---
title: "WSL 2の初期設定: WSL 2の初期設定インデックス"
slug: "wsl2-setup"
emoji: "🧭"
type: "tech"
topics: [ "index", "WSL", "Debian", "初期設定" ]
published: false
---

## はじめに

atsushifx です。
`WSL` (Windows Subsystem for Linux) は、Windows 上で `Linux` を実行するためのシステムです。
これを使えば、仮想マシンやデュアルブートのような複雑な環境構築をせずに、Windows 上で直接 `Linux` での開発ができます。

この記事では、WSL を有効にして Debian 環境を導入し、開発用に初期セットアップする方法を解説します。
実際の開発で必要になるエディタなどの設定方法について、`XDG`  仕様に沿った構成例も紹介します。

設定手順はすべて公式ドキュメントや広く使われている方法に基づいており、Windows 環境があれば誰でも同じ開発環境を構築できます。

実際の開発では、エディタやプログラミング言語などの設定も必要です。
これらは通常ドットファイルとよばれるファイルで設定しますが、`XDG Base Directory`仕様に従って整理する方法を説明します。
その結果、それぞれの設定ファイルが GitHub リポジトリで管理できるようになり、ポータビリティが高くなります。

このシリーズでは、Debian をベースにした開発環境を、段階的に無理なく整備していけるようにガイドしていきます。

## 1. 本ガイドの構成と目的

このガイドは、`WSL 2` (`Windows Subsystem for Linux 2') 上で Debian 環境を構築し、開発作業をスムーズに進めるための一連の手順をまとめたものです。
対象は、WSL をはじめて利用する初心者から、開発環境を効率よく構成したい中級プログラマーまでを想定しています。

`WSL 2` は Windows 上で `Linux` 環境を提供し、ネイティブに近い動作速度とシステムコールの互換性を持っています。
このガイドでは、特に Debian ディストリビューションを用いる構成にフォーカスし、Debian のインストールから初期環境の構築までを説明します。

記事全体の構成は次のとおりです。

- `WSL 2` および Debian の概要と特徴
- Debian を使用するうえで最低限知っておくべき基礎知識
- `WSL 2` 上の Debian の設定手順

初心者でも手順を追いやすいよう、公式ドキュメントなど信頼できる情報源をもとに構成しています。

このガイドを通じて、読者が自分の開発スタイルに合った `Linux` 環境を Windows 上で効率よく整備できるようになることを目的としています。

## 2. `WSL 2` / Debian の概要

### 2.1 WSL の概要

`WSL` (`Windows Subsystem for Linux`)は、Windows 環境で `Linux` をネイティブに近い形で実行できる互換レイヤーです。
Microsoft によって開発されたこの仕組みにより、ユーザーは Windows 上で直接 `Bash` シェルを起動し、`Linux` 用の各種ツールやユーティリティを使用できます。

WSL の目的は、開発者が `Linux` 環境を利用する必要がある場合でも、仮想マシンやデュアルブートといった従来の方法に頼らず、手軽に統合された環境を使えるようにすることです。特にクロスプラットフォーム開発や、`Linux` 専用のビルドツール・ライブラリを使用するシーンにおいて、有用性を発揮します。

WSL は複数の `Linux` ディストリビューション (Ubuntu、Debian、Alpine など) をインストール可能で、複数環境を共存させて使い分けることもできます。

### 2.2 `WSL 1` と `WSL 2` の違い

WSL には現在、2つのバージョンが存在します。初期バージョンである `WSL 1` と、改良されたアーキテクチャを採用した `WSL 2` です。両者には構造的な違いがあり、それぞれに適した用途が存在します。

`WSL 1` は Windows カーネルと直接連携し、`Linux` のシステムコールを Windows 側で逐次変換するというアプローチを採用しています。
この方式は起動が非常に高速で、Windows 側のファイルシステムとの連携にも優れていますが、`Linux` 固有の機能 (例：Docker の完全な動作) には一部制約があります。

一方、`WSL 2` は `Hyper-V` をベースにした軽量な仮想マシン内で、Microsoft が作成した `Linux` カーネルを動作させる構成に変更されています。
これにより、`Linux` カーネルとの互換性が大幅に向上し、ほぼすべての `Linux` システムコールが利用可能となっています。たとえば、Docker を WSL 2 上でネイティブに動かすことが可能になりました。

それぞれの特長を整理した比較表を以下に示します:

| 特徴  | `WSL 1` | `WSL 2` |
| --- | --- | --- |
| 実行方式 | システムコールを Windows カーネルで変換 |  `Linux` カーネルを仮想マシン内で実行 |
| 起動速度 | 非常に高速  | わずかに遅い (実用上問題ないレベル) |
| ファイルシステムのパフォーマンス | Windows 側での操作が高速 | `Linux` 側での操作が高速 |
| システムコールの互換性 | 一部制限あり | 完全に近い互換性を実現 |
| Docker の対応  | 制限あり (Docker Desktop が必要) | フル対応 (WSL 経由で Docker 利用可能) |

総合的に見て、現在では `WSL 2` の使用が強く推奨されています。
とくに、開発環境の再現性やツールの互換性を重視する場合には、`WSL 2` の導入が有利です。

### 2.3 Debian の概要

Debian は、安定性とセキュリティに重点を置いた `Linux` ディストリビューションの 1つです。
1993年にプロジェクトとして始まり、現在では世界中の開発者によって支えられており、多くの派生ディストリビューション (例: Ubuntu) のベースにもなっています。

特徴として、次の点が挙げられます:

- **安定性重視のパッケージ管理**
  `APT` パッケージマネージャーを用いた堅牢な依存関係の解決が可能です。新しいバージョンのリリースは厳格なテストを経て行なわれ、ミッションクリティカルな環境にも適しています。

- **高いセキュリティ水準**
  セキュリティアップデートが迅速に提供され、長期的なサポートが用意されているため、サーバー用途にも適しています。

- **広範なパッケージ提供数**
  数万を超えるソフトウェアパッケージが公式に提供されており、基本的な開発ツールから高度な科学技術計算ライブラリまで対応しています。

- **コミュニティ主導の開発体制**
  Debian プロジェクトは完全にコミュニティベースで運営されており、個々の開発者が維持管理する形で成り立っています。そのため、企業主体のディストリビューションと異なり、特定ベンダーの意向に左右されにくい中立性があります。

`WSL 2` 上で Debian を選ぶ利点は、こうした堅牢性や軽量性を活かしつつ、Windows 環境とスムーズに連携した開発ができる点にあります。初学者にも扱いやすく、トラブル時にもネット上で豊富な情報を得ることができます。

## 3. Debian を使うための基礎知識

Debian 環境を使いこなすためには、最低限のシステム操作やファイル管理に関する基本的な知識が必要です。
このセクションでは、`WSL 2` 上の Debian を快適に使うための学習ガイドを、いくつかの重要トピックに分けて紹介します。

### 3.1 Debian/`Linux` 基礎

- \[`Linux` のファイルシステム、ディレクトリとパス]:
  → `Linux` のファイル構造の基本と、ディレクトリの移動やファイルの取り扱い方を解説します。

- \[ユーザーとパーミッションの仕組み]:
  → `sudo` 権限、ファイルのアクセス制御、`chmod` や `chown` の基本操作を理解します。

- \[テキストエディタ`vi`入門]:
  → `vi` および `vim` の基本操作を習得し、シェル上でファイルを編集できるようになります。

- \[`ドットファイル`によるカスタマイズ]:
  → `.bashrc`, `.config` などの設定ファイルを通して、`Linux` 環境を自分好みに調整する方法を紹介します。

## 4. 開発環境構築ステップ (リンク付き)

ここでは、WSL 上に Debian 環境を構築する手順を順を追って説明します。

 1. WSL の手動セットアップ:
    WSL を有効化し、`wsl` コマンドを使用せずに手動でインストールを行なう方法を解説します。

 2. Debian のインストール:
    `wsl` コマンドを用いて Debian ディストリビューションをインストールし、初期ユーザーを設定する手順を紹介します。

 3. APT の初期設定:
    APT のミラーサイトを適切に設定し、パッケージを最新の状態へアップグレードする方法について解説します。

 4. Debian の日本語化:
    `task` メタパッケージを用いた日本語化、および日本語表示に必要な設定項目を説明します。

## おわりに

この記事では、Windows 上に `WSL 2` を導入し、Debian ディストリビューションを使った開発環境の初期構築手順を紹介しました。

ここで紹介した内容を順に実行することで、仮想マシンやデュアルブートといった従来の方法に頼らず、Windows 環境上で手軽かつ効率的に `Linux` 開発環境を整えることができます。

今後は、プログラミング言語のインストール、ドットファイルの整理、エディタの設定など、実際の開発に必要なツールや設定を加えていくことで、自分だけの快適な開発環境を構築していけるようになります。

このシリーズを通じて、自分の開発スタイルに合った `Linux` 環境を身につけていきましょう。
それでは、Happy Hacking!

## 参考資料

### Webサイト

- Windows に `Linux` をインストールする方法 (Microsoft): <https://learn.microsoft.com/ja-jp/windows/wsl/install>
- WSL の基本的なコマンド (Microsoft): <https://learn.microsoft.com/ja-jp/windows/wsl/basic-commands>
- WSL での詳細設定の構成 (Microsoft): <https://learn.microsoft.com/ja-jp/windows/wsl/wsl-config>
- Debian パッケージ管理ツール (Debian): <https://www.debian.org/doc/manuals/debian-faq/pkgtools.ja.html>
- APT (Wikipedia): <https://ja.wikipedia.org/wiki/APT>
- `XDG Base Directory` (Arch Wiki): <https://wiki.archlinux.jp/index.php/XDG_Base_Directory>
- ドットファイル (Arch WIki): <https://wiki.archlinux.jp/index.php/%E3%83%89%E3%83%83%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB>
