---
title: "Proxmoxのセットアップ: 自宅サーバの構築 オーバービュー"
emoji: "🏪"
type: "tech"
topics: [ "自宅サーバ", "環境構築", "仮想化", "Proxmox", "pve" ]
published: true
---

## はじめに

Amazon で購入したミニPC (**TRIGKEY Speed S5 Pro**) に`Proxmox VE`をインストールし、自宅サーバとして活用中です。
この記事では、ミニPC を用いた自宅サーバ構築の概要として、ハードウェアのスペックと自宅LANの構成について詳しく説明します。

2023年購入の上記機種は十分な性能でしたが、2025年現在ではさらに高性能な機種が購入可能です。

## オーバービュー

### ハードウェア

仮想化環境を構築にともない、ハードウェアを増設しました。

- メモリ、内蔵ストレージ:
  仮想マシンを複数実行するために、メモリを 64GB、ストレージを 2TB に増設

- 外付けストレージ:
  NAS としての運用を目的に、USB接続の外付けHDDを導入しました。転送速度向上のためディスクキャッシュを計画中。

以上をまとめると、ハードウェアスペックは以下のようになります。

| 種別 | モデル | 詳細 | 備考 |
| --- | --- | --- | --- |
| CPU | `AMD Ryzen 7 5800H` | `8コア` / `16スレッド` | |
| グラフィックス | `AMD Radeon Graphics` | `AMD Cezanne` | 内蔵グラフィックス |
| メモリ | `DDR4` | 64GB | |
| ストレージ 1 | `NVMe SSD` | `2TB` | |
| ストレージ 2 | `SATA SSD` | `2TB` | |
| 外付けHDD | `USB 3.2 Gen1` | `8TB` | ディスクキャッシュ予定 |

### 自宅LAN

以下に、`自宅LAN`の構成図を紹介します。

![自宅LAN構成図](/images/articles/pve-overview/house-lan.png)

`ISP`が提供するルーターを取り外せないため二重ルーター構成を採用しています。
`ISPルーター`は設定変更に制限されているため、`DMZ`を使用して 2段目のルーターに通信を転送しています。
このため、構成図では 1段目のルーターを省略しています。

`NAS`とミニPCは有線LANを使用し、高速かつ安定した通信を実現しています。
その他のデバイスは Wi-Fi を利用しています。

`IPアドレス`の割り当ては次の通りです。

| `ホスト名` | `デバイス種別` |  `IPアドレス` | `備考` |
| --- | --- | --- | --- |
| `ys` | `自PC` | `192.168.14.11~99` (動的) | `DHCP`で決定 |
| `rtgateway` | `ルーター` | `192.168.14.254` | 2段ルーターの 2段目 |
| `agartha` | `NAS` | `192.168.14.211` | |
| `pve` | `自宅サーバー` | `192.168.14.228` | `Proxmox VE`ホスト |
| `その他のサーバー` | `Proxmox VE`ゲスト | `192.168.14.100~199` | |

## 技術用語と注釈

- `Proxmox VE`:
  `Debian`ベースでコンテナーとハードウェア仮想化の両方の機能を持つ仮想化プラットフォーム。

- NAS:
  ネットワーク経由でアクセス可能なストレージデバイス。

- ディスクキャッシュ:
  高速なストレージ (例:`NVMe SSD`) をキャッシュとして利用し、頻繁にアクセスされるデータの読み書きを効率化する技術。

- `NVMe SSD`:
  `PCI Express`インターフェイスに接続するタイプのソリッドステートドライブ (`SSD`)。

- `SATA SSD`:
  `SATA`インターフェイスを使用し、`NVMe`より転送速度が遅いソリッドステートドライブ (`SSD`)。

- `USB 3.2 Gen1`:
  高速なデータ転送が可能な`USB`規格。

- 仮想化:
  1台の物理サーバで複数の独立した仮想環境 (`ゲストOS`) を動作させる技術。

- `ゲストOS`:
  仮想環境内で実行される独立したオペレーティングシステム。

- `TrueNAS`:
  オープンソースで高機能なストレージソリューションを提供する`NAS`ソフトウェア。

- `Docker`:
  アプリケーションを軽量なコンテナー内で実行するソフトウェア。

## おわりに

以上が自宅サーバ、自宅LANの概要です。
今後の記事では、この記事に示したスペックで`Proxmox VE`を使用します。

それでは、Happy Hacking!
